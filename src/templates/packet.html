{% layout "base" %}

{% block body %}
    <h1>{{ struct.meta.title }}</h1>
    {{ struct.meta.doc | markdown }}
    <h2>Summary</h2>
    {{ struct.doc | default: "_No documentation._" | markdown }}
    <h2>Structure</h2>
    {% include 'partials/struct.html' with fields: struct.seq, name: struct.meta.id %}
    {% if struct.types %}
        <h2>Subtypes</h2>
        {% for type in struct.types %}
        {% include 'partials/struct.html' with name: type[0], doc: type[1].doc, fields: type[1].seq %}
        {% endfor %}
    {% endif %}
    {% if struct.enums %}
        <h2>Enums</h2>
        {% for type in struct.enums %}
        <h3>{{ type[0] }}</h3>
        <table cellspacing="0">
            <thead>
                <tr>
                    <th width="100">Key</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                {% for case in type[1] %}
                <tr>
                    <td><code>{{ type[0] }}::{{ case[1] }}</code></td>
                    <td><code>{{ case[0] }}</code></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% endfor %}
    {% endif %}
    <h2>Definition</h2>
    <nav>
        <ul class="horizontal">
            <li><a class="button" href="https://github.com/pangbox/packetdoc/blob/master/{{ repopath }}"><i class="fab fa-github-alt"></i> View on GitHub</a></li>
            <li><a class="button" href="https://github.com/pangbox/packetdoc/edit/master/{{ repopath }}"><i class="fal fa-edit"></i> Edit on GitHub</a></li>
        </ul>
    </nav>
    <div class="source"><code><pre>{{ struct | stripdocs | yaml | highlight }}</pre></code></div>
    <h2>Examples</h2>
    {% for example in examples %}
    <div>
        <b>Agent:</b> {{ example.agent }}
        {{ example.data | hexdump: parser }}
    </div>
    {% else %}
    <i>No examples available. <a href="https://github.com/pangbox/packetdoc/upload/master">Contribute one?</a></i>
    {% endfor %}
{% endblock %}
